
# 📚 Student Management API

This is a RESTful API built using **Node.js**, **Express**, and **MongoDB** to manage student records.  
It supports full CRUD operations and is tested using **Jest** and **Keploy**.  
API Testing is integrated into a **CI/CD pipeline using GitHub Actions**.

---

## 🚀 Features

- CRUD operations for student records
- MongoDB with Mongoose ORM
- Swagger-based OpenAPI schema
- AI-generated test cases using Keploy
- API test replays via CI/CD
- Lightweight and modular codebase

---

## 📦 Tech Stack

| Layer     | Technology                         |
|-----------|------------------------------------|
| Backend   | Node.js, Express.js                |
| Database  | MongoDB, Mongoose                  |
| Testing   | Jest, Supertest, mongodb-memory-server |
| API Tests | Keploy (Record & Replay)           |
| CI/CD     | GitHub Actions                     |
| Docs      | Swagger (OpenAPI 3.0)              |

---

## 🔌 API Endpoints

| Method | Endpoint               | Description             |
|--------|------------------------|-------------------------|
| POST   | `/api/students`        | Create a student        |
| GET    | `/api/students`        | Get all students        |
| PUT    | `/api/students/:id`    | Update a student        |
| DELETE | `/api/students/:id`    | Delete a student        |

---

## 📄 OpenAPI Schema

- ✅ Schema format: OpenAPI 3.0  
- ✅ Generated using `swagger-jsdoc`

### 🔗 Swagger UI:
[http://localhost:5000/api-docs](http://localhost:5000/api-docs)

### 🔗 Swagger JSON (for Keploy):
[http://localhost:5000/api-docs-json](http://localhost:5000/api-docs-json)

### 📄 YAML Schema:
[`student-api.yaml`](./student-api.yaml)

---

## 🧪 API Testing with Keploy

Keploy was used to:
- Record cURL and OpenAPI-based test cases
- Replay those tests during development and CI
- Assert functionality without writing test code manually

### ✅ Keploy Test Report

🔗 [View Full Report on Keploy](https://app.keploy.io/api-testing/tr/dcc4e352-6b38-47fd-846a-cb191706686f?suiteId=88b4a484-0ff6-411d-a886-9e1083b3e650)

### 📷 Screenshot of Test Result

![Keploy Test Result](./screenshots/keploy-report.png)

---

## 🔁 CI/CD Pipeline with GitHub Actions

This project includes an automated pipeline that runs on every push or PR to `main`. It performs:

- ✅ `npm install`
- ✅ Unit + integration tests using Jest
- ✅ Keploy API test replay via Docker

### 🔧 CI Config File:
[`ci.yml`](.github/workflows/ci.yml)

---

## 🧪 Local Testing Guide

### 1. Install dependencies
```bash
npm install
```

### 2. Run the server
```bash
node server.js
```

### 3. Run Jest tests
```bash
npm test
```

### 4. Run Keploy API test replay
```bash
keploy test
```

Or using Docker:
```bash
docker run -v ${PWD}:/app -w /app keploy/keploy:latest keploy test
```

---

## 📁 Folder Structure

```
📁 your-project/
├── models/
│   └── Student.js
├── routes/
│   └── students.js
├── tests/
│   ├── unit/studentModel.test.js
│   ├── integration/studentIntegration.test.js
│   └── api/studentAPI.test.js
├── .keploy/
│   └── testcases/           ← YAML test cases generated by Keploy
├── .github/
│   └── workflows/ci.yml     ← CI/CD pipeline config
├── screenshots/
│   └── keploy-report.png    ← Screenshot of Keploy test report
├── student-api.yaml         ← OpenAPI schema for API testing
├── server.js                ← Express server
├── package.json             ← Project metadata and scripts
└── README.md                ← You're here!
```

---

## 👤 Author

**Aishwarya Vera**  
GitHub: [@2903Aishwarya](https://github.com/2903Aishwarya)

---

## 🛠 Resources

- 📘 Keploy Docs: [https://docs.keploy.io](https://docs.keploy.io)
- 🤖 API Testing with AI: [https://app.keploy.io](https://app.keploy.io)
- 💬 Community: [Keploy Discord](https://discord.gg/keploy)

---
